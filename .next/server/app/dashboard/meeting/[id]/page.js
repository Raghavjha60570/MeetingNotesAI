(()=>{var e={};e.id=400,e.ids=[400],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9825:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>l,routeModule:()=>p,tree:()=>c}),s(9463),s(2834),s(2029),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),o=s(5231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let c=["",{children:["dashboard",{children:["meeting",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9463)),"/Users/ankursingh/Test-cursor/live-meeting-notes/src/app/dashboard/meeting/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2834)),"/Users/ankursingh/Test-cursor/live-meeting-notes/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"/Users/ankursingh/Test-cursor/live-meeting-notes/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/ankursingh/Test-cursor/live-meeting-notes/src/app/dashboard/meeting/[id]/page.tsx"],m="/dashboard/meeting/[id]/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/meeting/[id]/page",pathname:"/dashboard/meeting/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},813:(e,t,s)=>{let r={ccc46a517d8685c1672027f6ddad37bf848b378a:()=>Promise.resolve().then(s.bind(s,2834)).then(e=>e.$$ACTION_0)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={ccc46a517d8685c1672027f6ddad37bf848b378a:a.bind(null,"ccc46a517d8685c1672027f6ddad37bf848b378a")}},8364:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},9524:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23))},1713:()=>{},1411:(e,t,s)=>{Promise.resolve().then(s.bind(s,2908))},6557:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(7577),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:c="",children:l,...m},h)=>(0,r.createElement)("svg",{ref:h,...a,width:n,height:n,stroke:s,strokeWidth:d?24*Number(o)/Number(n):o,className:["lucide",`lucide-${i(e)}`,c].join(" "),...m},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(l)?l:[l]]));return s.displayName=`${e}`,s}},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6283:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},8775:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},1608:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},4061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2908:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(326),a=s(7577),i=s(5047),n=s(2777);class o{constructor(e,t,s){this.ws=null,this.audioContext=null,this.mediaRecorder=null,this.stream=null,this.isRecording=!1,this.meetingId=e,this.onTranscription=t,this.onError=s}async connect(){try{let e="https:"===window.location.protocol?"wss:":"ws:",t=`${e}//${window.location.host}/api/transcript/stream?meeting_id=${this.meetingId}`;this.ws=new WebSocket(t),this.ws.onopen=()=>{console.log("WebSocket connected"),this.ws?.send(JSON.stringify({type:"start_meeting"}))},this.ws.onmessage=e=>{let t=JSON.parse(e.data);"transcription"===t.type?this.onTranscription(t.text,t.startTime,t.endTime):"error"===t.type&&this.onError(t.message)},this.ws.onerror=e=>{console.error("WebSocket error:",e),this.onError("Connection failed")},this.ws.onclose=()=>{console.log("WebSocket disconnected")}}catch(e){console.error("Failed to connect WebSocket:",e),this.onError("Failed to establish connection")}}async startRecording(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0}}),this.audioContext=new AudioContext({sampleRate:16e3}),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:"audio/webm;codecs=opus"});let e=[],t=0;this.mediaRecorder.ondataavailable=t=>{t.data.size>0&&e.push(t.data)},this.mediaRecorder.onstop=async()=>{if(e.length>0){let s=new Blob(e,{type:"audio/webm"}),r=await s.arrayBuffer(),a=btoa(String.fromCharCode(...new Uint8Array(r)));this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"audio_chunk",audio:a,startTime:this.formatTime(t),endTime:this.formatTime(Date.now()-t)})),e.length=0}},this.mediaRecorder.start(3e3),this.isRecording=!0,t=Date.now()}catch(e){console.error("Failed to start recording:",e),this.onError("Failed to access microphone")}}stopRecording(){this.mediaRecorder&&this.isRecording&&(this.mediaRecorder.stop(),this.isRecording=!1),this.stream&&this.stream.getTracks().forEach(e=>e.stop()),this.audioContext&&this.audioContext.close()}endMeeting(){this.stopRecording(),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"end_meeting"})),this.disconnect()}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}formatTime(e){let t=Math.floor(e/1e3);return`${Math.floor(t/3600).toString().padStart(2,"0")}:${Math.floor(t%3600/60).toString().padStart(2,"0")}:${(t%60).toString().padStart(2,"0")}`}}var d=s(8998),c=s(4061),l=s(8775),m=s(1608),h=s(6283);function p(){let e=(0,i.useParams)();(0,i.useRouter)();let t=e.id,[s,p]=(0,a.useState)(null),[u,x]=(0,a.useState)([]),[g,y]=(0,a.useState)([]),[b,f]=(0,a.useState)(!1),[v,N]=(0,a.useState)(!0),[w,j]=(0,a.useState)(""),[_,S]=(0,a.useState)(null),k=async()=>{try{let{data:e,error:s}=await n.O.from("meetings").select("*").eq("id",t).single();if(s)throw s;p(e);let{data:r,error:a}=await n.O.from("transcript_chunks").select("*").eq("meeting_id",t).order("start_time",{ascending:!0});a||x(r||[]);let{data:i,error:o}=await n.O.from("ai_summaries").select("*").eq("meeting_id",t).order("created_at",{ascending:!1});o||y(i||[]),f("in_progress"===e.status)}catch(e){j(e.message)}finally{N(!1)}},P=async()=>{try{let e=new o(t,(e,s,r)=>{let a={id:Date.now().toString(),meeting_id:t,text:e,start_time:s,end_time:r,status:"completed",created_at:new Date().toISOString()};x(e=>[...e,a])},e=>{j(e)});await e.connect(),await e.startRecording(),S(e),f(!0),await n.O.from("meetings").update({status:"in_progress"}).eq("id",t)}catch(e){j(e.message)}},T=async()=>{_&&(_.endMeeting(),S(null),f(!1));try{await fetch("/api/meetings/end",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({meeting_id:t})}),k()}catch(e){j(e.message)}},C=async()=>{try{(await fetch("/api/meetings/generate-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({meeting_id:t})})).ok&&k()}catch(e){j(e.message)}};return v?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.title}),s.description&&r.jsx("p",{className:"mt-2 text-gray-600",children:s.description}),(0,r.jsxs)("div",{className:"flex items-center mt-4 space-x-4 text-sm text-gray-500",children:[r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"in_progress"===s.status?"bg-green-100 text-green-800":"completed"===s.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:s.status.replace("_"," ")}),(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx(d.Z,{className:"w-4 h-4 mr-1"}),s.start_time?new Date(s.start_time).toLocaleString():"Not started"]}),s.participant_count>0&&(0,r.jsxs)("span",{className:"flex items-center",children:[r.jsx(c.Z,{className:"w-4 h-4 mr-1"}),s.participant_count," participants"]})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:["scheduled"===s.status&&(0,r.jsxs)("button",{onClick:P,className:"btn-primary flex items-center",children:[r.jsx(l.Z,{className:"w-4 h-4 mr-2"}),"Start Recording"]}),"in_progress"===s.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>{_&&(_.stopRecording(),f(!1))},className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 flex items-center",children:[r.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"Pause"]}),(0,r.jsxs)("button",{onClick:T,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center",children:[r.jsx(m.Z,{className:"w-4 h-4 mr-2"}),"End Meeting"]})]}),"completed"===s.status&&0===g.length&&(0,r.jsxs)("button",{onClick:C,className:"btn-primary flex items-center",children:[r.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Generate Summary"]})]})]}),w&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsx("p",{className:"text-red-800",children:w})}),b&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse mr-3"}),r.jsx("p",{className:"text-green-800 font-medium",children:"Recording in progress..."})]})}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Live Transcript"}),r.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===u.length?r.jsx("p",{className:"text-gray-500 text-center py-8",children:b?"Listening...":"No transcript available yet"}):u.map(e=>(0,r.jsxs)("div",{className:"border-l-4 border-primary-500 pl-4 py-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("span",{className:"text-sm text-gray-500",children:e.start_time}),e.speaker_name&&r.jsx("span",{className:"text-sm font-medium text-primary-600",children:e.speaker_name})]}),r.jsx("p",{className:"text-gray-900",children:e.text})]},e.id))})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"AI Summary"}),0===g.length?r.jsx("p",{className:"text-gray-500 text-center py-8",children:"completed"===s.status?"Summary not generated yet":"Summary will appear after the meeting ends"}):r.jsx("div",{className:"space-y-4",children:g.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2 capitalize",children:e.summary_type.replace("_"," ")}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.content}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Generated ",new Date(e.created_at).toLocaleString()]})]},e.id))})]})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Meeting not found"}),r.jsx("p",{className:"text-gray-600",children:"The meeting you're looking for doesn't exist."})]})}},2777:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var r=s(7203);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,i=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,n=(0,r.eI)(a,i,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},2834:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$ACTION_0:()=>h,default:()=>m});var r=s(9510),a=s(4330);s(166);var i=s(7122),n=s(1615),o=s(8585),d=s(7371),c=s(2494),l=s(1807);async function m({children:e}){let t=(0,n.cookies)(),s=(0,i.lx)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{cookies:{get:e=>t.get(e)?.value,set(e,s,r){try{t.set({name:e,value:s,...r})}catch(e){}},remove(e,s){try{t.set({name:e,value:"",...s})}catch(e){}}}}),{data:{user:m}}=await s.auth.getUser();console.log("Dashboard layout: Checking auth, user:",m?m.email:"null"),m||(console.log("Dashboard layout: No user found, redirecting to signin"),(0,o.redirect)("/auth/signin")),console.log("Dashboard layout: User authenticated, proceeding to render");let p=(0,a.j)("ccc46a517d8685c1672027f6ddad37bf848b378a",h);return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)(d.default,{href:"/dashboard",className:"flex items-center",children:[r.jsx(c.Z,{className:"w-8 h-8 text-primary-600"}),r.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Live Notes"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(d.default,{href:"/dashboard",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Dashboard"}),r.jsx(d.default,{href:"/upload",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium",children:"Upload"}),r.jsx("form",{action:p,children:(0,r.jsxs)("button",{type:"submit",className:"text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium flex items-center",children:[r.jsx(l.Z,{className:"w-4 h-4 mr-1"}),"Sign Out"]})})]})]})})}),r.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e})]})}async function h(){let e=(0,n.cookies)(),t=(0,i.lx)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,{cookies:{get:t=>e.get(t)?.value,set(t,s,r){try{e.set({name:t,value:s,...r})}catch(e){}},remove(t,s){try{e.set({name:t,value:"",...s})}catch(e){}}}});await t.auth.signOut(),(0,o.redirect)("/auth/signin")}},9463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/ankursingh/Test-cursor/live-meeting-notes/src/app/dashboard/meeting/[id]/page.tsx#default`)},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>n});var r=s(9510),a=s(5317),i=s.n(a);s(5023);let n={title:"Live Meeting Notes - AI Note Taker",description:"Record meetings, get real-time transcripts, and AI-generated summaries"};function o({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:e})})}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,417,554,706,404,801,911],()=>s(9825));module.exports=r})();